<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="icon" href="favicon.ico">
    <link rel="shortcut icon" href="favicon.ico">
    <title>Simple Attendance Calculator</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
</head>
<body>
    <div class="container mt-5">
        <h1 class="mb-4"><img src="attendance.png" alt="attendance icon" style="height: 1em; vertical-align: middle; margin-right: 10px;"> Simple Attendance Calculator</h1>
		<p><span style="color: gray;"><strong>NOTE:</strong> This is a simple attendance percentage calculator for a module or subject. For values of classes, enter the number of classes for best results. That is, if a subject was taught for 3 days and there were 3 classes per day, enter 9 for number of classes.<br><br>Please note that this is provided as-is with no guarantee. This site was not created by experts. Exact values may differ based on how a particular university calculate days and classes. Please consult your teacher or tutor for exact values and advise.</span></p><br>
        <form id="attendanceForm">
            <div class="mb-3">
                <label for="threshold" class="form-label">Required Attendance Percentage:</label>
                <input type="number" id="threshold" class="form-control" min="0" max="100" required>
            </div>
			
			      <div class="mb-3">
                <label for="attendedSoFar" class="form-label">Classes attended, so far:</label>
                <input type="number" id="attendedSoFar" class="form-control" min="0" required>
            </div>
			
			      <div class="mb-3">
                <label for="daysSoFar" class="form-label">Total classes, conducted so far:</label>
                <input type="number" id="daysSoFar" class="form-control" min="0" required>
            </div>

            <div class="mb-3">
                <label for="daysRemaining" class="form-label">Number of classes remaining:</label>
                <input type="number" id="daysRemaining" class="form-control" min="0" required>
            </div>

			      <div class="mb-3">
                <label for="leaveDays" class="form-label">Classes you want to take leave of absence:</label>
                <input type="number" id="leaveDays" class="form-control" min="0">
            </div>

            <button type="button" class="btn btn-primary" onclick="calculateAttendance()" style="background-color: #545454; border-color: #545454">Calculate Percentages</button>
        </form>

        <div class="mt-4" id="results"></div>
    </div>

    <!-- Include Bootstrap JS (Optional, only needed for Bootstrap features like modals) -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.min.js"></script>
    
    <script>
        function calculateAttendance() {
            const threshold = parseFloat(document.getElementById("threshold").value);
            const daysSoFar = parseInt(document.getElementById("daysSoFar").value);
            const daysRemaining = parseInt(document.getElementById("daysRemaining").value);
            const attendedSoFar = parseInt(document.getElementById("attendedSoFar").value);
			      const leaveDays = parseInt(document.getElementById("leaveDays").value) || 0;
            const totalDays = daysSoFar + daysRemaining;
            const currentPercentage = (attendedSoFar / daysSoFar) * 100;
            const requiredAttendance = (threshold / 100) * totalDays;
      			const attendedDaysWithLOA = attendedSoFar + (daysRemaining - leaveDays);
      			const newPercentagePredicted = (attendedDaysWithLOA / totalDays) * 100;
      			leavesLeft = ((newPercentagePredicted - threshold) / 100) * totalDays;
      			currAttendanceString = `<p>Current attendance percentage: <strong><span style="color: green;">${currentPercentage.toFixed(2)}%</span></strong></p>`;
      			if ((currentPercentage - threshold) < 0) {
      				currAttendanceString = `<p>Current attendance percentage: <strong><span style="color: red;"> ${currentPercentage.toFixed(2)}%</span></strong></p>`;
      			}
      			newAttendanceString = `<p><strong>Predicted attendance percentage after leave of absence:
      				<span style="color: green;">${newPercentagePredicted.toFixed(2)}%</span>
      				</strong></p>`;
      			if ((newPercentagePredicted - threshold) < 0) {
      				newAttendanceString = `<p><strong>Predicted attendance percentage after leave of absence:
      					<span style="color: red;"> ${newPercentagePredicted.toFixed(2)}%</span>
      					</strong></p>`;
      			}
      			if (leavesLeft < 0) {
      				leavesLeft = 0;
      			}
      
            const resultsDiv = document.getElementById("results");
            resultsDiv.innerHTML = `
            <p>Required attendance percentage: ${threshold.toFixed(2)}%</p>
            ${currAttendanceString}
            ${newAttendanceString}
            <p>Remaining leaves you can take by staying above required attendance threshold: ${leavesLeft.toFixed(0)}</p>
            `;
        }
    </script>
  	<footer style="width: 100%; text-align: center; padding: 10px 0;">
  	  <p>Made with <i class="fa fa-heart" style="color: #ff0000;"></i>, <i class="fa fa-code" style="color: #545454;"></i> & <i class="fa fa-coffee" style="color: #545454;"></i> | <a href="https://anandj.xyz" style="color: #545454;">AJ</a><br>
  	  Icon credit: <a href="https://fontawesome.com/icons/heart?f=classic&s=solid&pc=%23ff0000" style="color: #545454;">Font Awesome</a> | Logo Credit: <a href="https://www.flaticon.com/free-icons/attendance" title="attendance icons" style="color: #545454;">Attendance icons created by Vectors Tank - Flaticon</a></p>
  	</footer>
</body>
</html>
